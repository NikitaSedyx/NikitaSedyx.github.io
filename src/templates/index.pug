doctype html
html(lang="en")
  head
    title Network
    script(type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js")
    style(type="text/css").
      #main {
        display: flex;
        justify-content: center;
      }

      #apps_network {
        width: 1200px;
        height: 760px;
        border: 2px solid lightgray;
        border-left: 0;
      }

      #legend {
        width: 200px;
        height: 760px;
        border: 2px solid lightgray;
        border-right: 0;
        padding: 0 10px;
      }

      #legend .legend-list {
        padding: 0;
        list-style: none;
      }

      #legend .legend-list .legend-section {
        font-weight: 600;
        margin: 8px 5px;
      }

      #legend .legend-color {
        width: 10px;
        height: 10px;
        display: inline-block;
        vertical-align: middle;
      }

      #legend .legend-color.valid {
        background: #97c2fc;
        border: 1px solid #2b7ce8;
      }

      #legend .legend-color.invalid {
        background: red;
        border: 1px solid red;
      }

      #legend .legend-color.planned {
        background: grey;
        border: 1px solid lightgray;
      }

      #legend .legend-element {
        display: inline-block;
        vertical-align: middle;
      }

      #legend .legend-element.application {
        width: 20px;
        height: 10px;
        border-radius: 50%;
        background: #97c2fc;
        border: 1px solid #2b7ce8;
      }

      #legend .label {
        display: inline-block;
        vertical-align: middle;
        margin-left: 5px;
      }
  body
    div#main
      div#legend
        h2 Legend
        ul.legend-list
          li.legend-section Color
          li
            span.legend-color.valid
            span.label Valid

          li
            span.legend-color.invalid
            span.label Invalid

          li
            span.legend-color.planned
            span.label Planned

          li.legend-section Element

          li
            span.legend-element.application
            span.label Application

          li
            span.legend-element.required &#8594;
            span.label Required dependency

          li
            span.legend-element.optional &#8674;
            span.label Optional dependency
      div#apps_network

    script(type="text/javascript").
      // create an array with nodes
      var nodes = new vis.DataSet(!{JSON.stringify(apps)});

      // create an array with edges
      var edges = new vis.DataSet(!{JSON.stringify(dependencies)});

      // create a network
      var container = document.getElementById("apps_network");
      var data = {
        nodes: nodes,
        edges: edges,
      };

      var options = {
        edges: {
            arrows: {
            to: { enabled: true, scaleFactor: 1 }
            }
        }
      };
      var network = new vis.Network(container, data, options);
